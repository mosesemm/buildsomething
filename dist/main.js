(()=>{"use strict";const e=e=>e&&e.trim(),t=e=>btoa(JSON.stringify(e)),d=e=>JSON.parse(atob(e));window.that=new function(){var o=this;o.tasks=[],o.outputTblBody=document.getElementById("outputTblBody"),o.editOrView=document.getElementById("editOrView"),o.taskEdit=document.getElementById("taskEdit"),o.doneEdit=document.getElementById("doneEdit"),o.updateBtn=document.getElementById("updateBtn"),o.selectedTask={},o.deletTaskElm=document.getElementById("deleteTask"),o.addBtn=document.getElementById("addBtn"),o.todoTxt=document.getElementById("todoTxt"),o.errorFeedback=document.getElementById("errorFeedback"),o.desializeData=d,o.addBtn.onclick=function(t){t.preventDefault(),o.errorFeedback.innerText="",o.errorFeedback.style.display="none";let d=o.todoTxt.value;if(o.todoTxt.style.border="",!e(d))return o.errorFeedback.innerText="Task description is required",o.errorFeedback.style.display="block",void(o.todoTxt.style.border="1px solid red");const s={description:d,done:!1};o.tasks.push(s),o.renderTable(),o.todoTxt.value=""},o.renderTable=()=>{const e=o.tasksToRows(o.tasks);o.outputTblBody.innerHTML=e.join("")},o.rowStroke=e=>e.done?"text-decoration: line-through;":"",o.tasksToRows=e=>e.map((e=>`<tr style="${o.rowStroke(e)}"><td>${e.description}</td><td><a data-task="${t(e)}" href="#" id="viewTask" onClick="that.editOrViewTask(this.dataset.task)">Edit/View</a> \n            <a href="#" style="color: red" data-task="${t(e)}" onClick="event.preventDefault(); that.deleteTask(this.dataset.task)">Delete</a></td></tr>`)),o.editOrViewTask=e=>{const t=d(e);o.selectedTask=t,o.editOrView.style.display="block",o.taskEdit.value=t.description,o.doneEdit.checked=t.done},o.deleteTask=e=>{const t=o.desializeData(e);o.tasks=o.tasks.filter((e=>!(e.description===t.description&&e.done===t.done))),o.renderTable()},o.updateBtn.onclick=function(t){t.preventDefault();const d={description:o.taskEdit.value,done:o.doneEdit.checked},s=document.getElementById("errorFeedbackView");if(s.innerText="",s.style.display="none",o.taskEdit.style.border="",!e(d.description))return s.innerText="Task description is required",s.style.display="block",void(taskEdit.style.border="1px solid red");o.tasks=o.tasks.filter((e=>!(e.description===o.selectedTask.description&&e.done===o.selectedTask.done))),o.tasks.push(d),o.renderTable(),o.selectedTask=d}}})();